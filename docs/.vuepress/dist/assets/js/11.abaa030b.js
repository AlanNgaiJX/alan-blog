(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{318:function(e,n,r){},322:function(e,n,r){"use strict";r(318)},384:function(e,n,r){"use strict";r.r(n);var t=r(30),i=r(66);r(73),r(343),r(350),r(351),r(352),r(353),r(354),r(355),r(356),r(357),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(368),r(369),r(370),r(371),r(372),r(9),r(373),r(374),r(375),r(376),r(319),r(377);var o={name:"fire-canvas",props:{custom:{type:Object,default:null},rel:{default:null}},mounted:function(){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,o=e;o.width=o.clientWidth,o.height=o.clientHeight;var a={TEXTURE_DOWNSAMPLE:1,DENSITY_DISSIPATION:.98,VELOCITY_DISSIPATION:.99,PRESSURE_DISSIPATION:.8,PRESSURE_ITERATIONS:25,CURL:30,SPLAT_RADIUS:.005};Object.assign(a,n);var u=[],v=[],f=s(o),m=f.gl,l=f.ext;function s(e){var n,r,t={alpha:!1,depth:!1,stencil:!1,antialias:!1},i=e.getContext("webgl2",t),o=!!i;o||(i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)),o?(i.getExtension("EXT_color_buffer_float"),r=i.getExtension("OES_texture_float_linear")):(n=i.getExtension("OES_texture_half_float"),r=i.getExtension("OES_texture_half_float_linear")),i.clearColor(0,0,0,1);var a,u,v,f=o?i.HALF_FLOAT:n.HALF_FLOAT_OES;return o?(a=c(i,i.RGBA16F,i.RGBA,f),u=c(i,i.RG16F,i.RG,f),v=c(i,i.R16F,i.RED,f)):(a=c(i,i.RGBA,i.RGBA,f),u=c(i,i.RGBA,i.RGBA,f),v=c(i,i.RGBA,i.RGBA,f)),{gl:i,ext:{formatRGBA:a,formatRG:u,formatR:v,halfFloatTexType:f,supportLinearFiltering:r}}}function c(e,n,r,t){if(!d(e,n,r,t))switch(n){case e.R16F:return c(e,e.RG16F,e.RG,t);case e.RG16F:return c(e,e.RGBA16F,e.RGBA,t);default:return null}return{internalFormat:n,format:r}}function d(e,n,r,t){var i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,n,4,4,0,r,t,null);var o=e.createFramebuffer();return e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.checkFramebufferStatus(e.FRAMEBUFFER)==e.FRAMEBUFFER_COMPLETE}function E(){this.id=-1,this.x=0,this.y=0,this.dx=0,this.dy=0,this.down=!1,this.moved=!1,this.color=[30,0,300]}u.push(new E);var T=function(){function e(n,r){if(Object(t.a)(this,e),this.uniforms={},this.program=m.createProgram(),m.attachShader(this.program,n),m.attachShader(this.program,r),m.linkProgram(this.program),!m.getProgramParameter(this.program,m.LINK_STATUS))throw m.getProgramInfoLog(this.program);for(var i=m.getProgramParameter(this.program,m.ACTIVE_UNIFORMS),o=0;o<i;o++){var a=m.getActiveUniform(this.program,o).name;this.uniforms[a]=m.getUniformLocation(this.program,a)}}return Object(i.a)(e,[{key:"bind",value:function(){m.useProgram(this.program)}}]),e}();function p(e,n){var r=m.createShader(e);if(m.shaderSource(r,n),m.compileShader(r),!m.getShaderParameter(r,m.COMPILE_STATUS))throw m.getShaderInfoLog(r);return r}var g,R,x,h,y,D,_,A=p(m.VERTEX_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    attribute vec2 aPosition;\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform vec2 texelSize;\n\n    void main () {\n        vUv = aPosition * 0.5 + 0.5;\n        vL = vUv - vec2(texelSize.x, 0.0);\n        vR = vUv + vec2(texelSize.x, 0.0);\n        vT = vUv + vec2(0.0, texelSize.y);\n        vB = vUv - vec2(0.0, texelSize.y);\n        gl_Position = vec4(aPosition, 0.0, 1.0);\n    }\n"),S=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n    uniform float value;\n\n    void main () {\n        gl_FragColor = value * texture2D(uTexture, vUv);\n    }\n"),F=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTexture;\n\n    void main () {\n        gl_FragColor = texture2D(uTexture, vUv);\n    }\n"),U=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uTarget;\n    uniform float aspectRatio;\n    uniform vec3 color;\n    uniform vec2 point;\n    uniform float radius;\n\n    void main () {\n        vec2 p = vUv - point.xy;\n        p.x *= aspectRatio;\n        vec3 splat = exp(-dot(p, p) / radius) * color;\n        vec3 base = texture2D(uTarget, vUv).xyz;\n        gl_FragColor = vec4(base + splat, 1.0);\n    }\n"),w=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform float dt;\n    uniform float dissipation;\n\n    vec4 bilerp (in sampler2D sam, in vec2 p) {\n        vec4 st;\n        st.xy = floor(p - 0.5) + 0.5;\n        st.zw = st.xy + 1.0;\n        vec4 uv = st * texelSize.xyxy;\n        vec4 a = texture2D(sam, uv.xy);\n        vec4 b = texture2D(sam, uv.zy);\n        vec4 c = texture2D(sam, uv.xw);\n        vec4 d = texture2D(sam, uv.zw);\n        vec2 f = p - st.xy;\n        return mix(mix(a, b, f.x), mix(c, d, f.x), f.y);\n    }\n\n    void main () {\n        vec2 coord = gl_FragCoord.xy - dt * texture2D(uVelocity, vUv).xy;\n        gl_FragColor = dissipation * bilerp(uSource, coord);\n        gl_FragColor.a = 1.0;\n    }\n"),L=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uSource;\n    uniform vec2 texelSize;\n    uniform float dt;\n    uniform float dissipation;\n\n    void main () {\n        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;\n        gl_FragColor = dissipation * texture2D(uSource, coord);\n        gl_FragColor.a = 1.0;\n    }\n"),b=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n\n    vec2 sampleVelocity (in vec2 uv) {\n        vec2 multiplier = vec2(1.0, 1.0);\n        if (uv.x < 0.0) { uv.x = 0.0; multiplier.x = -1.0; }\n        if (uv.x > 1.0) { uv.x = 1.0; multiplier.x = -1.0; }\n        if (uv.y < 0.0) { uv.y = 0.0; multiplier.y = -1.0; }\n        if (uv.y > 1.0) { uv.y = 1.0; multiplier.y = -1.0; }\n        return multiplier * texture2D(uVelocity, uv).xy;\n    }\n\n    void main () {\n        float L = sampleVelocity(vL).x;\n        float R = sampleVelocity(vR).x;\n        float T = sampleVelocity(vT).y;\n        float B = sampleVelocity(vB).y;\n        float div = 0.5 * (R - L + T - B);\n        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);\n    }\n"),P=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n\n    void main () {\n        float L = texture2D(uVelocity, vL).y;\n        float R = texture2D(uVelocity, vR).y;\n        float T = texture2D(uVelocity, vT).x;\n        float B = texture2D(uVelocity, vB).x;\n        float vorticity = R - L - T + B;\n        gl_FragColor = vec4(vorticity, 0.0, 0.0, 1.0);\n    }\n"),M=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uVelocity;\n    uniform sampler2D uCurl;\n    uniform float curl;\n    uniform float dt;\n\n    void main () {\n        float T = texture2D(uCurl, vT).x;\n        float B = texture2D(uCurl, vB).x;\n        float C = texture2D(uCurl, vUv).x;\n        vec2 force = vec2(abs(T) - abs(B), 0.0);\n        force *= 1.0 / length(force + 0.00001) * curl * C;\n        vec2 vel = texture2D(uVelocity, vUv).xy;\n        gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);\n    }\n"),B=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uDivergence;\n\n    vec2 boundary (in vec2 uv) {\n        uv = min(max(uv, 0.0), 1.0);\n        return uv;\n    }\n\n    void main () {\n        float L = texture2D(uPressure, boundary(vL)).x;\n        float R = texture2D(uPressure, boundary(vR)).x;\n        float T = texture2D(uPressure, boundary(vT)).x;\n        float B = texture2D(uPressure, boundary(vB)).x;\n        float C = texture2D(uPressure, vUv).x;\n        float divergence = texture2D(uDivergence, vUv).x;\n        float pressure = (L + R + B + T - divergence) * 0.25;\n        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);\n    }\n"),I=p(m.FRAGMENT_SHADER,"\n    precision highp float;\n    precision mediump sampler2D;\n\n    varying vec2 vUv;\n    varying vec2 vL;\n    varying vec2 vR;\n    varying vec2 vT;\n    varying vec2 vB;\n    uniform sampler2D uPressure;\n    uniform sampler2D uVelocity;\n\n    vec2 boundary (in vec2 uv) {\n        uv = min(max(uv, 0.0), 1.0);\n        return uv;\n    }\n\n    void main () {\n        float L = texture2D(uPressure, boundary(vL)).x;\n        float R = texture2D(uPressure, boundary(vR)).x;\n        float T = texture2D(uPressure, boundary(vT)).x;\n        float B = texture2D(uPressure, boundary(vB)).x;\n        vec2 velocity = texture2D(uVelocity, vUv).xy;\n        velocity.xy -= vec2(R - L, T - B);\n        gl_FragColor = vec4(velocity, 0.0, 1.0);\n    }\n");W();var C=new T(A,S),N=new T(A,F),X=new T(A,U),O=new T(A,l.supportLinearFiltering?L:w),G=new T(A,b),V=new T(A,P),H=new T(A,M),z=new T(A,B),Y=new T(A,I);function W(){g=m.drawingBufferWidth>>a.TEXTURE_DOWNSAMPLE,R=m.drawingBufferHeight>>a.TEXTURE_DOWNSAMPLE;var e=l.halfFloatTexType,n=l.formatRGBA,r=l.formatRG,t=l.formatR;x=k(2,g,R,n.internalFormat,n.format,e,l.supportLinearFiltering?m.LINEAR:m.NEAREST),h=k(0,g,R,r.internalFormat,r.format,e,l.supportLinearFiltering?m.LINEAR:m.NEAREST),y=j(4,g,R,t.internalFormat,t.format,e,m.NEAREST),D=j(5,g,R,t.internalFormat,t.format,e,m.NEAREST),_=k(6,g,R,t.internalFormat,t.format,e,m.NEAREST)}function j(e,n,r,t,i,o,a){m.activeTexture(m.TEXTURE0+e);var u=m.createTexture();m.bindTexture(m.TEXTURE_2D,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texImage2D(m.TEXTURE_2D,0,t,n,r,0,i,o,null);var v=m.createFramebuffer();return m.bindFramebuffer(m.FRAMEBUFFER,v),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,u,0),m.viewport(0,0,n,r),m.clear(m.COLOR_BUFFER_BIT),[u,v,e]}function k(e,n,r,t,i,o,a){var u=j(e,n,r,t,i,o,a),v=j(e+1,n,r,t,i,o,a);return{get read(){return u},get write(){return v},swap:function(){var e=u;u=v,v=e}}}var J=(m.bindBuffer(m.ARRAY_BUFFER,m.createBuffer()),m.bufferData(m.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,m.createBuffer()),m.bufferData(m.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),m.STATIC_DRAW),m.vertexAttribPointer(0,2,m.FLOAT,!1,0,0),m.enableVertexAttribArray(0),function(e){m.bindFramebuffer(m.FRAMEBUFFER,e),m.drawElements(m.TRIANGLES,6,m.UNSIGNED_SHORT,0)}),$=Date.now();function q(){Z();var e=Math.min((Date.now()-$)/1e3,.016);$=Date.now(),m.viewport(0,0,g,R),v.length>0&&Q(v.pop()),O.bind(),m.uniform2f(O.uniforms.texelSize,1/g,1/R),m.uniform1i(O.uniforms.uVelocity,h.read[2]),m.uniform1i(O.uniforms.uSource,h.read[2]),m.uniform1f(O.uniforms.dt,e),m.uniform1f(O.uniforms.dissipation,a.VELOCITY_DISSIPATION),J(h.write[1]),h.swap(),m.uniform1i(O.uniforms.uVelocity,h.read[2]),m.uniform1i(O.uniforms.uSource,x.read[2]),m.uniform1f(O.uniforms.dissipation,a.DENSITY_DISSIPATION),J(x.write[1]),x.swap();for(var n=0;n<u.length;n++){var r=u[n];r.moved&&(K(r.x,r.y,r.dx,r.dy,r.color),r.moved=!1)}V.bind(),m.uniform2f(V.uniforms.texelSize,1/g,1/R),m.uniform1i(V.uniforms.uVelocity,h.read[2]),J(D[1]),H.bind(),m.uniform2f(H.uniforms.texelSize,1/g,1/R),m.uniform1i(H.uniforms.uVelocity,h.read[2]),m.uniform1i(H.uniforms.uCurl,D[2]),m.uniform1f(H.uniforms.curl,a.CURL),m.uniform1f(H.uniforms.dt,e),J(h.write[1]),h.swap(),G.bind(),m.uniform2f(G.uniforms.texelSize,1/g,1/R),m.uniform1i(G.uniforms.uVelocity,h.read[2]),J(y[1]),C.bind();var t=_.read[2];m.activeTexture(m.TEXTURE0+t),m.bindTexture(m.TEXTURE_2D,_.read[0]),m.uniform1i(C.uniforms.uTexture,t),m.uniform1f(C.uniforms.value,a.PRESSURE_DISSIPATION),J(_.write[1]),_.swap(),z.bind(),m.uniform2f(z.uniforms.texelSize,1/g,1/R),m.uniform1i(z.uniforms.uDivergence,y[2]),t=_.read[2],m.uniform1i(z.uniforms.uPressure,t),m.activeTexture(m.TEXTURE0+t);for(var i=0;i<a.PRESSURE_ITERATIONS;i++)m.bindTexture(m.TEXTURE_2D,_.read[0]),J(_.write[1]),_.swap();Y.bind(),m.uniform2f(Y.uniforms.texelSize,1/g,1/R),m.uniform1i(Y.uniforms.uPressure,_.read[2]),m.uniform1i(Y.uniforms.uVelocity,h.read[2]),J(h.write[1]),h.swap(),m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight),N.bind(),m.uniform1i(N.uniforms.uTexture,x.read[2]),J(null),requestAnimationFrame(q)}function K(e,n,r,t,i){X.bind(),m.uniform1i(X.uniforms.uTarget,h.read[2]),m.uniform1f(X.uniforms.aspectRatio,o.width/o.height),m.uniform2f(X.uniforms.point,e/o.width,1-n/o.height),m.uniform3f(X.uniforms.color,r,-t,1),m.uniform1f(X.uniforms.radius,a.SPLAT_RADIUS),J(h.write[1]),h.swap(),m.uniform1i(X.uniforms.uTarget,x.read[2]),m.uniform3f(X.uniforms.color,.3*i[0],.3*i[1],.3*i[2]),J(x.write[1]),x.swap()}function Q(e){for(var n=0;n<e;n++){var r=[10*Math.random(),10*Math.random(),10*Math.random()];K(o.width*Math.random(),o.height*Math.random(),1e3*(Math.random()-.5),1e3*(Math.random()-.5),r)}}function Z(){o.width==o.clientWidth&&o.height==o.clientHeight||(o.width=o.clientWidth,o.height=o.clientHeight,W())}Q(parseInt(20*Math.random())+5),q(),window.addEventListener("mouseup",(function(){u[0].down=!1})),window.addEventListener("touchend",(function(e){for(var n=e.changedTouches,r=0;r<n.length;r++)for(var t=0;t<u.length;t++)n[r].identifier==u[t].id&&(u[t].down=!1)})),r&&(r.addEventListener("mousemove",(function(e){u[0].moved=u[0].down,u[0].dx=10*(e.offsetX+e.target.offsetLeft-u[0].x),u[0].dy=10*(e.offsetY+e.target.offsetTop-u[0].y),u[0].x=e.offsetX+e.target.offsetLeft,u[0].y=e.offsetY+e.target.offsetTop})),r.addEventListener("touchmove",(function(e){e.preventDefault();for(var n=e.targetTouches,r=0;r<n.length;r++){var t=u[r];t.moved=t.down,t.dx=10*(n[r].pageX+n[r].offsetLeft-t.x),t.dy=10*(n[r].pageY+n[r].offsetTop-t.y),t.x=n[r].pageX+n[r].offsetLeft,t.y=n[r].pageY+n[r].offsetTop}}),!1),r.addEventListener("mouseenter",(function(){u[0].down=!0,u[0].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]})),r.addEventListener("mousedown",(function(){u[0].down=!0,u[0].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]})),r.addEventListener("mouseleave",(function(){u[0].down=!1})));o.addEventListener("mousemove",(function(e){u[0].moved=u[0].down,u[0].dx=10*(e.offsetX-u[0].x),u[0].dy=10*(e.offsetY-u[0].y),u[0].x=e.offsetX,u[0].y=e.offsetY})),o.addEventListener("touchmove",(function(e){e.preventDefault();for(var n=e.targetTouches,r=0;r<n.length;r++){var t=u[r];t.moved=t.down,t.dx=10*(n[r].pageX-t.x),t.dy=10*(n[r].pageY-t.y),t.x=n[r].pageX,t.y=n[r].pageY}}),!1),o.addEventListener("mousedown",(function(){u[0].down=!0,u[0].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]})),o.addEventListener("touchstart",(function(e){e.preventDefault();for(var n=e.targetTouches,r=0;r<n.length;r++)r>=u.length&&u.push(new E),u[r].id=n[r].identifier,u[r].down=!0,u[r].x=n[r].pageX,u[r].y=n[r].pageY,u[r].color=[Math.random()+.2,Math.random()+.2,Math.random()+.2]}))}(this.$el,this.custom,this.rel)}},a=(r(322),r(26)),u=Object(a.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("canvas",{staticClass:"fire-canvas"})}),[],!1,null,null,null);n.default=u.exports}}]);